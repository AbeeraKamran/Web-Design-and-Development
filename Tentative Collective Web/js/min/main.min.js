$(document).ready(function(){$(".menu-toggle a").click(function(){$(".menu").slideToggle(700)})}),function(t){function e(){var e=[{elementType:"geometry",stylers:[{visibility:"simplified"},{saturation:-100},{gamma:1.6}]},{elementType:"labels",stylers:[{saturation:-100}]},{featureType:"water",stylers:[{gamma:3},{hue:"#ffffff"}]}],e=[{featureType:"landscape",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",stylers:[{saturation:-100},{lightness:51},{visibility:"simplified"}]},{featureType:"road.highway",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"road.arterial",stylers:[{saturation:-100},{lightness:30},{visibility:"on"}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"off"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"on"},{lightness:-25},{saturation:-100}]},{featureType:"water",elementType:"geometry",stylers:[{visibility:"simplified"},{gamma:1.6},{saturation:-97}]}];t(".map").each(function(){var o=t(this).data("map");if(o){var i=new google.maps.LatLng(o[0].marker.lat,o[0].marker.lng),s={center:i,zoomControl:1,zoom:15},a=new google.maps.Map(document.getElementById(t(this).attr("id")),s);a.markers=[];for(var n in o)if(o.hasOwnProperty(n)){var r=o[n],l=new google.maps.LatLng(r.marker.lat,r.marker.lng),f=new google.maps.Marker({title:r.title,animation:google.maps.Animation.DROP,position:l,map:a,icon:"img/marker.png"});a.markers.push(f);var p='<div class="map-marker"><h3>'+r.title+"</h3><p>"+r.marker.address+"</p></div>",m=new google.maps.InfoWindow({content:r.title});google.maps.event.addListener(f,"click",function(t,e,o){return function(){o.setContent(e),o.open(a,t)}}(f,p,m)),google.maps.event.addListener(a,"click",function(t,e,o){return function(){o.close(a,t)}}(f,p,m)),m.setContent(p),m.open(a,f)}a.set("styles",e),a.setOptions({scrollwheel:!1});var c=new google.maps.LatLngBounds;t.each(a.markers,function(t,e){var o=new google.maps.LatLng(e.position.lat(),e.position.lng());c.extend(o)}),1==a.markers.length?a.setCenter(c.getCenter()):a.fitBounds(c)}else t(this).remove()})}function o(){var e=t(window).height(),o=t(document).scrollTop(),a=o/(n-e),r=a*(s-e);if(a>1){var l=s-e,f=n-o;t(".overlay").css({position:"fixed",top:-l+f-i})}else t(".overlay").css({position:"fixed",top:-r})}t.fn.closestToOffset=function(e){var o,i,s,a,n,r=null,l=e.left,f=e.top;return this.each(function(){if(o=t(this).offset(),l>=o.left&&l<=o.right&&f>=o.top&&f<=o.bottom)return r=t(this),!1;var e=[[o.left,o.top],[o.right,o.top],[o.left,o.bottom],[o.right,o.bottom]];for(off in e)s=e[off][0]-l,a=e[off][1]-f,i=Math.sqrt(s*s+a*a),(void 0===n||n>i)&&(n=i,r=t(this))}),r},t.fn.positionPoints=function(){a=t(this),t(".point").each(function(){$point=t(this),$point.addClass("visible");var e=$point.width(),o=$point.data("x")/100*(a.width()-e/2),i=$point.data("y")/100*(a.height()-e/2);$point.css({top:i,left:o})})};var i,s,a,n;t(window).scroll(function(){o()}),t(window).load(function(){function r(){var e=t(document).scrollTop();0!=e&&t(t(".scrollTo").get().reverse()).each(function(){var o=t(this).position().top-e;return 0>o?(t("body, html").stop().animate({scrollTop:o+e-80},400),!1):void 0})}function l(){var e=t(document).scrollTop(),o=t(document).height()-t(window).height();e>=o-40?t("html, body").stop().animate({scrollTop:0},1500):t(".scrollTo").each(function(){var o=t(this).position().top-e;if(o>100){var i=o+e;return t(this).hasClass("clearfix")&&(i=o+e-80),t("html, body").stop().animate({scrollTop:i},400),!1}})}a=t(".overlay"),t(window).resize(function(){i=t(".map-wrap").outerHeight(),s=a.height(),n=t(document).height()-i,a.positionPoints(),o()}).resize(),e(),t(".point").hover(function(){$point=t(this);var e=t(".overlay").offset(),o=$point.offset().left+$point.width()/2,i=$point.offset().top+$point.height()/2-e.top,a=o/t(window).width()*100,n=i/s*100;t(".overlay-image").css({"transform-origin":a+"% "+n+"%","-ms-transform-origin":a+"% "+n+"%","-moz-transform-origin":a+"% "+n+"%","-o-transform-origin":a+"% "+n+"%","-webkit-transform-origin":a+"% "+n+"%"}),t(".overlay, .caption").addClass("visible"),t(".caption").html($point.data("title"))},function(){t(".overlay-image").removeClass("zoom"),t(".overlay, .caption").removeClass("visible")}),t(".point").click(function(){t(".overlay-image").hasClass("zoom")?(t(".overlay-image").removeClass("zoom"),t(".overlay, .caption").removeClass("visible")):t(".overlay-image").addClass("zoom")}),t('a[href^="#"]').click(function(e){if(e.preventDefault(),t(this).hasClass("cv")){t("body").addClass("hide");var o=t(this).attr("href");t(o).addClass("active")}else{var i=t(this).attr("href");t("html, body").animate({scrollTop:t(i).offset().top},400)}}),t(".close").click(function(){t("body").removeClass("hide"),t(".cv-inner").removeClass("active")}),t(document).keydown(function(e){switch(e.which){case 38:case 33:r();break;case 40:case 34:l();break;case 36:t("body, html").stop().animate({scrollTop:0},400);break;case 35:t("body, html").stop().animate({scrollTop:t(document).height()-t(window).height()},400);break;default:return}e.preventDefault()}),setTimeout(function(){t(window).mousemove(function(e){var o=e.pageX,i=e.pageY,s=t(".point").closestToOffset({left:o,top:i});t(".point").removeClass("highlight visible"),s.addClass("highlight")})},1500)})}(jQuery);